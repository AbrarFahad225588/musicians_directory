{% extends 'base.html' %}
{% block content %}
<h1>Musicians Directory</h1>

<table class="table">
    <thead>
      <tr>
        <th scope="col">ID</th>
        <th scope="col">Musician Name</th>
        <th scope="col">Email</th>
        <th scope="col">Album Rating</th>
        <th scope="col">Instrument Type</th>
        <th scope="col">Album Name</th>
        <th scope="col">Release Date</th>
        <th scope="col">Actions</th>
      </tr>
    </thead>
    <tbody>
        {% for musician in musicians %}
        {% for album in musician.albums.all %}
            <tr>
                <th scope="row">{{ musician.id }}</td>
                <td><a class="btn btn-outline-secondary" href="{% url 'edit_musician' musician.id %}">{{ musician.first_name }} {{ musician.last_name }}</a></td>
                <td>{{ musician.email }}</td>
                <td>{{ album.rating }}</td>
                <td>{{ musician.instrument_type }}</td>
                <td>{{ album.album_name }}</td>
                <td>{{ album.release_date|date:"d-M-Y" }}</td>
                <td>
                  <a class="btn btn-warning" href="{% url 'edit_album' album.id %}">Edit</a>
                  <a class="btn btn-danger" href="{% url 'delete_album' album.id %}">Delete</a>
                </td>
            </tr>
        {% endfor %}
    {% endfor %}
    </tbody>
  </table>
{%endblock%}